/**
 * AnimatedLogo - Premium animated logo component
 * 
 * Features:
 * - Uses wide 1200x630 heading SVG for optimal display
 * - Mountain silhouette "draws" from left to right via clip-path
 * - Text letters fade in with stagger after mountain
 * - Designed for seamless shell-to-React transition
 */

import { useEffect } from 'react';
import { m, LazyMotion, domAnimation } from 'framer-motion';

interface AnimatedLogoProps {
    className?: string;
    onAnimationComplete?: () => void;
    /** Skip animation and show logo immediately */
    skipAnimation?: boolean;
}

export function AnimatedLogo({ className = '', onAnimationComplete, skipAnimation = false }: AnimatedLogoProps) {
    useEffect(() => {
        if (skipAnimation) {
            onAnimationComplete?.();
        }
    }, [skipAnimation, onAnimationComplete]);

    // Animation timing
    const mountainDuration = 0.8;
    const textStaggerDelay = 0.05;
    const textStartDelay = 0.4;

    // Letter animation variants
    const letterVariants = {
        hidden: { opacity: 0, y: 5 },
        visible: (i: number) => ({
            opacity: 1,
            y: 0,
            transition: {
                delay: textStartDelay + (i * textStaggerDelay),
                duration: 0.3,
                ease: 'easeOut'
            }
        })
    };

    return (
        <LazyMotion features={domAnimation}>
            <m.svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 900 187"
                className={`animated-logo ${className}`}
                preserveAspectRatio="xMidYMid meet"
                initial={skipAnimation ? false : { opacity: 0 }}
                animate={{ opacity: 1 }}
                transition={{ duration: 0.3 }}
                role="img"
                aria-label="Lekker Find - Best things to do in Cape Town"
            >
                <defs>
                    {/* Clip path for mountain draw animation */}
                    <clipPath id="mountain-reveal-heading">
                        <m.rect
                            x="0"
                            y="0"
                            width="900"
                            height="187"
                            initial={skipAnimation ? { x: 0 } : { x: -900 }}
                            animate={{ x: 0 }}
                            transition={{
                                duration: mountainDuration,
                                ease: [0.25, 0.46, 0.45, 0.94]
                            }}
                        />
                    </clipPath>
                </defs>

                {/* Mountain silhouette with clip-path reveal - positioned for heading SVG */}
                <g clipPath="url(#mountain-reveal-heading)" transform="translate(23, 0)">
                    <path
                        fill="#1e242d"
                        fillOpacity="1"
                        fillRule="nonzero"
                        d="M 185.339844 18.359375 C 177.40625 18.191406 172.863281 22.289062 169.058594 27.765625 C 162.726562 36.875 156.628906 46.179688 149.800781 54.910156 C 141.949219 64.945312 131.847656 71.878906 118.859375 73.746094 C 104.9375 75.75 96.117188 84.019531 90.589844 96.484375 C 87.890625 102.570312 85.160156 108.648438 82.128906 114.570312 C 79.65625 119.402344 76.75 124.980469 71.832031 126.742188 C 51.847656 133.902344 38.417969 151.894531 18.195312 158.441406 C 12.988281 160.128906 7.863281 162.0625 2.265625 162.878906 C 5.597656 157.109375 11.292969 155.019531 16.757812 153.234375 C 36.625 146.753906 49.304688 130.621094 64.351562 117.839844 C 71.917969 111.410156 74.671875 101.261719 76.6875 91.511719 C 79.976562 75.59375 88.035156 65.578125 105.566406 63.675781 C 123.972656 61.683594 136.117188 49.390625 146.125 34.804688 C 150.96875 27.738281 155.46875 20.402344 160.773438 13.699219 C 171.027344 0.734375 181.734375 -1.757812 197.003906 4.695312 C 207.945312 9.324219 217.027344 16.859375 226.46875 23.832031 C 231.007812 27.1875 235.433594 30.847656 242.367188 31.5625 C 247.492188 7.460938 266.304688 6.464844 285.800781 5.878906 C 347.675781 4.027344 409.566406 4.5625 471.453125 4.027344 C 493.339844 3.839844 515.238281 3.421875 537.105469 2.53125 C 551.847656 1.929688 562.136719 7.867188 568.523438 20.976562 C 569.21875 22.402344 570.125 23.757812 570.589844 25.257812 C 575.828125 42.175781 584.113281 53.839844 605.023438 50.402344 C 614.109375 48.910156 620.625 56.28125 625.578125 63.695312 C 635.398438 78.386719 640.578125 95.101562 646.417969 111.535156 C 648.539062 117.5 650.195312 123.738281 653.140625 129.285156 C 658.433594 139.253906 666.992188 140.859375 674.867188 132.867188 C 689.425781 118.085938 706.855469 105.410156 713.007812 83.972656 C 713.6875 81.601562 715.335938 79.472656 716.710938 77.34375 C 725.40625 63.886719 731.640625 62.902344 744.792969 71.695312 C 755.054688 78.558594 763.605469 86.433594 768.066406 98.394531 C 770.417969 104.699219 775.777344 107.652344 782.570312 109.273438 C 804.261719 114.445312 820.714844 125.683594 826.753906 148.84375 C 829.457031 159.210938 834.03125 168.976562 840.984375 177.609375 C 835.609375 175.878906 832.492188 171.816406 829.902344 167.304688 C 827.222656 162.628906 824.75 157.835938 822.234375 153.066406 C 813.496094 136.476562 800.191406 126.191406 781.3125 124.164062 C 767.617188 122.691406 758.425781 116.113281 753.6875 102.96875 C 750.136719 93.113281 741.484375 87.996094 733.320312 82.394531 C 727.03125 86.113281 725.292969 92.519531 723.03125 98.234375 C 713.730469 121.765625 693.230469 135.710938 676.261719 152.453125 C 667.734375 160.867188 654.578125 156.769531 646.621094 146.003906 C 639.875 136.878906 637.757812 125.730469 633.1875 115.652344 C 628.34375 104.976562 624.480469 93.859375 620 83.015625 C 614.902344 70.683594 606.28125 63.308594 592.183594 64.429688 C 578.234375 65.542969 569.480469 58.960938 563.925781 46.5625 C 547.742188 10.433594 550.949219 18.25 518.042969 18.363281 C 440.289062 18.636719 362.539062 19.765625 284.785156 20.660156 C 279.75 20.714844 274.691406 21.523438 269.695312 22.308594 C 262.972656 23.371094 259.375 27.210938 258.183594 34.238281 C 255.730469 48.695312 249.859375 51.773438 236.171875 46.710938 C 227.410156 43.46875 220.101562 37.90625 212.664062 32.457031 C 204.523438 26.488281 196.730469 19.71875 185.339844 18.359375 Z M 185.339844 18.359375"
                    />
                </g>

                {/* LEKKER text - dark letters */}
                <m.g fill="#1e242d" fillOpacity="1" custom={0} variants={letterVariants} initial={skipAnimation ? 'visible' : 'hidden'} animate="visible">
                    <g transform="translate(147.583702, 137.570092)">
                        <path d="M 8.0625 0 L 8.0625 -59.3125 L 15.53125 -59.3125 L 15.53125 -6.640625 L 41.453125 -6.640625 L 41.453125 0 Z M 8.0625 0" />
                    </g>
                </m.g>

                <m.g fill="#1e242d" fillOpacity="1" custom={1} variants={letterVariants} initial={skipAnimation ? 'visible' : 'hidden'} animate="visible">
                    <g transform="translate(191.09733, 137.570092)">
                        <path d="M 41.203125 0 L 8.0625 0 L 8.0625 -59.3125 L 41.203125 -59.3125 L 41.203125 -52.75 L 15.53125 -52.75 L 15.53125 -34.21875 L 39.703125 -34.21875 L 39.703125 -27.75 L 15.53125 -27.75 L 15.53125 -6.5625 L 41.203125 -6.5625 Z M 41.203125 0" />
                    </g>
                </m.g>

                <m.g fill="#1e242d" fillOpacity="1" custom={2} variants={letterVariants} initial={skipAnimation ? 'visible' : 'hidden'} animate="visible">
                    <g transform="translate(237.268277, 137.570092)">
                        <path d="M 51.421875 0 L 42.609375 0 L 21.59375 -28.328125 L 15.53125 -23.015625 L 15.53125 0 L 8.0625 0 L 8.0625 -59.3125 L 15.53125 -59.3125 L 15.53125 -30.0625 C 17.195312 -31.945312 18.882812 -33.832031 20.59375 -35.71875 C 22.3125 -37.601562 24.03125 -39.484375 25.75 -41.359375 L 41.78125 -59.3125 L 50.5 -59.3125 L 27 -33.46875 Z M 51.421875 0" />
                    </g>
                </m.g>

                <m.g fill="#1e242d" fillOpacity="1" custom={3} variants={letterVariants} initial={skipAnimation ? 'visible' : 'hidden'} animate="visible">
                    <g transform="translate(288.670822, 137.570092)">
                        <path d="M 51.421875 0 L 42.609375 0 L 21.59375 -28.328125 L 15.53125 -23.015625 L 15.53125 0 L 8.0625 0 L 8.0625 -59.3125 L 15.53125 -59.3125 L 15.53125 -30.0625 C 17.195312 -31.945312 18.882812 -33.832031 20.59375 -35.71875 C 22.3125 -37.601562 24.03125 -39.484375 25.75 -41.359375 L 41.78125 -59.3125 L 50.5 -59.3125 L 27 -33.46875 Z M 51.421875 0" />
                    </g>
                </m.g>

                <m.g fill="#1e242d" fillOpacity="1" custom={4} variants={letterVariants} initial={skipAnimation ? 'visible' : 'hidden'} animate="visible">
                    <g transform="translate(340.073367, 137.570092)">
                        <path d="M 41.203125 0 L 8.0625 0 L 8.0625 -59.3125 L 41.203125 -59.3125 L 41.203125 -52.75 L 15.53125 -52.75 L 15.53125 -34.21875 L 39.703125 -34.21875 L 39.703125 -27.75 L 15.53125 -27.75 L 15.53125 -6.5625 L 41.203125 -6.5625 Z M 41.203125 0" />
                    </g>
                </m.g>

                <m.g fill="#1e242d" fillOpacity="1" custom={5} variants={letterVariants} initial={skipAnimation ? 'visible' : 'hidden'} animate="visible">
                    <g transform="translate(386.244314, 137.570092)">
                        <path d="M 24.421875 -59.3125 C 31.785156 -59.3125 37.222656 -57.910156 40.734375 -55.109375 C 44.253906 -52.316406 46.015625 -48.09375 46.015625 -42.4375 C 46.015625 -39.28125 45.429688 -36.648438 44.265625 -34.546875 C 43.109375 -32.441406 41.628906 -30.753906 39.828125 -29.484375 C 38.023438 -28.210938 36.128906 -27.242188 34.140625 -26.578125 L 50.421875 0 L 41.703125 0 L 27.328125 -24.5 L 15.53125 -24.5 L 15.53125 0 L 8.0625 0 L 8.0625 -59.3125 Z M 24 -52.828125 L 15.53125 -52.828125 L 15.53125 -30.8125 L 24.421875 -30.8125 C 29.234375 -30.8125 32.75 -31.765625 34.96875 -33.671875 C 37.1875 -35.585938 38.296875 -38.398438 38.296875 -42.109375 C 38.296875 -45.984375 37.128906 -48.738281 34.796875 -50.375 C 32.472656 -52.007812 28.875 -52.828125 24 -52.828125 Z M 24 -52.828125" />
                    </g>
                </m.g>

                {/* FIND text - teal letters */}
                <m.g fill="#1c9e8f" fillOpacity="1" custom={6} variants={letterVariants} initial={skipAnimation ? 'visible' : 'hidden'} animate="visible">
                    <g transform="translate(437.905465, 137.570092)">
                        <path d="M 15.53125 0 L 8.0625 0 L 8.0625 -59.3125 L 41.203125 -59.3125 L 41.203125 -52.75 L 15.53125 -52.75 L 15.53125 -31.734375 L 39.625 -31.734375 L 39.625 -25.171875 L 15.53125 -25.171875 Z M 15.53125 0" />
                    </g>
                </m.g>

                <m.g fill="#1c9e8f" fillOpacity="1" custom={7} variants={letterVariants} initial={skipAnimation ? 'visible' : 'hidden'} animate="visible">
                    <g transform="translate(481.003882, 137.570092)">
                        <path d="M 24.75 0 L 3.328125 0 L 3.328125 -4.3125 L 10.296875 -5.890625 L 10.296875 -53.328125 L 3.328125 -54.984375 L 3.328125 -59.3125 L 24.75 -59.3125 L 24.75 -54.984375 L 17.78125 -53.328125 L 17.78125 -5.890625 L 24.75 -4.3125 Z M 24.75 0" />
                    </g>
                </m.g>

                <m.g fill="#1c9e8f" fillOpacity="1" custom={8} variants={letterVariants} initial={skipAnimation ? 'visible' : 'hidden'} animate="visible">
                    <g transform="translate(509.154855, 137.570092)">
                        <path d="M 55.078125 0 L 46.34375 0 L 14.625 -49.25 L 14.28125 -49.25 C 14.394531 -47.3125 14.535156 -44.898438 14.703125 -42.015625 C 14.867188 -39.140625 14.953125 -36.179688 14.953125 -33.140625 L 14.953125 0 L 8.0625 0 L 8.0625 -59.3125 L 16.703125 -59.3125 L 48.34375 -10.21875 L 48.671875 -10.21875 C 48.617188 -11.101562 48.550781 -12.429688 48.46875 -14.203125 C 48.382812 -15.972656 48.300781 -17.894531 48.21875 -19.96875 C 48.132812 -22.050781 48.09375 -24.003906 48.09375 -25.828125 L 48.09375 -59.3125 L 55.078125 -59.3125 Z M 55.078125 0" />
                    </g>
                </m.g>

                <m.g
                    fill="#1c9e8f"
                    fillOpacity="1"
                    custom={9}
                    variants={letterVariants}
                    initial={skipAnimation ? 'visible' : 'hidden'}
                    animate="visible"
                    onAnimationComplete={() => onAnimationComplete?.()}
                >
                    <g transform="translate(572.2662, 137.570092)">
                        <path d="M 55.5625 -30.234375 C 55.5625 -20.210938 52.832031 -12.664062 47.375 -7.59375 C 41.925781 -2.53125 34.332031 0 24.59375 0 L 8.0625 0 L 8.0625 -59.3125 L 26.328125 -59.3125 C 32.253906 -59.3125 37.414062 -58.203125 41.8125 -55.984375 C 46.21875 -53.765625 49.609375 -50.492188 51.984375 -46.171875 C 54.367188 -41.859375 55.5625 -36.546875 55.5625 -30.234375 Z M 47.671875 -29.984375 C 47.671875 -37.898438 45.71875 -43.695312 41.8125 -47.375 C 37.914062 -51.0625 32.394531 -52.90625 25.25 -52.90625 L 15.53125 -52.90625 L 15.53125 -6.390625 L 23.59375 -6.390625 C 39.644531 -6.390625 47.671875 -14.253906 47.671875 -29.984375 Z M 47.671875 -29.984375" />
                    </g>
                </m.g>
            </m.svg>
        </LazyMotion>
    );
}

export default AnimatedLogo;
